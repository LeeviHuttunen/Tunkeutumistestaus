# Kybertappoketju

x) Kuuntelin herramieshakkerit-podcastista jakson: Kuinka päästä tietoturva-alalle töihin?
- Tietoturva-alalle ei ole yhtä reittiä, eri osaamisalueilta menee ihmisiä töihin tietoturva-alalle. Koulutuksella ei ole väliä, vaan osaamisella.
- Osaamista pitää olla kuitenkin joltain tietojenkäsittely osa-alueelta ennen tietoturva-alalle siirtymistä.
- Alalla on myös tärkeää se, että on kiinnostunut siitä ja lukee esim. Alaan liittyviä uutisia vapaa-ajalla.

## Hutchins et al 2011: Intelligence-Driven Computer Network Defense Informed by Analysis of Adversary Campaigns and Intrusion Kill Chains, chapters Abstract, 3.2 Intrusion Kill Chain.
- Kill chain, eli suomeksi kybertappoketju pitää sisällää 7 eri hyökkäyksen kohtaa. Kohdat sisältävät tiivistettynä hyökkäyskohteen kartoittamisesta kohteen heikkouksien etsimiseen.
- Kohdat ovat: 1. Reconnaissance 2. Weaponization 3. Delivery 4. Exploitation 5. Installation 6. Command and Control 7. Actions on Objectives.
- Lisäksi Microsoftin sivuilta löytyi myös maininta, jossa sanottiin, että monet kyberturvallisuus-asiantuntijat ovat ottaneet käyttöön myös kahdeksannen kohdan: Rahaksi muuttamisen, kuten tietojen myymisen, tai lunnasohjelmien käytön.
- Jos kybertappoketjusta puuttuu yksikin osa, seuraavaa ei voida toteuttaa.

## € Santos et al: The Art of Hacking (Video Collection): 4.3 Surveying Essential Tools for Active Reconnaissance

- Videot käsittelivät porttiskannausta.
- Nmap on monipuolisin ja vakain porttiskannaus työkalu.
- Masscan on nopein porttiskannauksen työkalu.
- Videolla käsiteltiin Nmapin, Masscannin käyttöä ja udp-porttien skannausta.

## KKO 2003:36

- 17-vuotias henkilö oli porttiskannannut Osuuspankkikeskuksen verkkoa. Skannaus ei ollut kuitenkaan läpäissyt pankin tietojärjestelmän palomuuria.
- Korvausvaatimuksina oli yhteensä 110 000 markkaa.
- Tekijä joutui korvaamaan vahingot kokonaisuudessaan.

a) Kali asennettu lataamalla iso Image Kalin nettisivuilta Virtualboxiin. Versio 2025.2.

b) Ensiksi pingasin 8.8.8.8, jonka jälkeen irrotin Kalin verkosta. Tämän jälkeen Kali ei saanut enää pingattua osoitetta 8.8.8.8.

<img width="798" height="600" alt="VirtualBox_leevihu_24_08_2025_13_05_33" src="https://github.com/user-attachments/assets/0f688833-68fb-4bb8-b63e-e3c0468eeaed" />

Seuraavaksi porttiskannasin 1000 tavallisinta tcp-porttia omalta koneeltani komennolla "nmap -T4 -A localhost". 

<img width="798" height="600" alt="VirtualBox_leevihu_24_08_2025_13_10_16" src="https://github.com/user-attachments/assets/1b7567fe-6cc3-422a-b1a5-ad414868e14a" />

Porttiskannaus onnistui. 
- T4 tarkoittaa jotakin hakuaikaan liityvää (kuinka nopeasti hakee?). 0 on hitain ja 5 on nopein.
- -A tarkoittaa käyttöjärjestelmän ja version tunnistamista, sekä script skannausta ja trace routea.
- Haun tuloksena oli se, että kaikki tuhat porttia olivat kiinni tässä yhdessä ip-osoitteessa, koska en ole vielä avannut mitään porttia.

c)
- Seuraavaksi latasin Apache2 kommennolla "sudo apt-get install apache2" ja SSH:n komennolla "sudo apt-get install ssh"
- Otin tämän jälkeen virtuaalikoneesta nettiyhteyden pois ja pingasin vielä varmuuden vuoksi 8.8.8.8. Tuloksena ei nettiyhteyttä, joten uudelleen vain skannaamaan.
- Kaikki tuhat porttia vieläkin kiinni. Ainiin! Apache ja ssh pitää käynnistää uudelleen, jotta portteja aukeaa. Eli komento "sudo systemctl restart apache2" ja sama ssh:lle. Ja sitten taas nettiyhteys pois ja uutta skannausta.


<img width="798" height="600" alt="VirtualBox_leevihu_24_08_2025_13_52_39" src="https://github.com/user-attachments/assets/df5386cb-f164-49a2-96c7-fa2332671209" />

Kappas kummaa! Siellä on kaksi porttia auki. Portti 22, jota ssh käyttää ja portti 80, jota apache2 käyttää. Lisäksi tällä skannaus kerralla näkyi myös se, että käyttöjärjestelmä on Linux ja Linuxin versionumero.

e) Asensin seuraavaksi Metaspoitablen sourceforge.netistä ja liitin lataamani virtual diskin uuteen virtuaalikoneeseen.

<img width="779" height="134" alt="image" src="https://github.com/user-attachments/assets/655e0141-7161-4791-9515-fc8e6ce7f703" />


f) Seuraavaksi luodaan virtuaaliverkko koneiden välille. Tässä kohtaa koitin seurata Tuomas Valkamon tekemiä ohjeita samassa tehtävässä. Menin Virtualboxissa kohtaan network, jossa lisäsin uuden host-only networkin. Sen jälkeen menin Kali Linuxin asetuksiin. Otin kohdan network ja adapter 1 jätin default asetuksille nat-yhteyden. Siirryin adapter 2:een ja lisäsin sinne luomani host-only adapterin. Sitten menin Metasploitable koneelle ja laitoin host-only adapterin adapter 1:een.

<img width="723" height="74" alt="image" src="https://github.com/user-attachments/assets/26226347-8043-4a5f-83d5-773ed941c021" />

Sitten vielä varmistin, että Kali-koneella adapter 1 irti ottaessani nettiyhteys katkeaa. Toimi kuten pitikin:

<img width="798" height="600" alt="VirtualBox_leevihu_24_08_2025_23_01_58" src="https://github.com/user-attachments/assets/810d3683-2f66-45af-acb8-6a68ef4398e9" />

Metasploitella pingatessani 8.8.8.8 vastaukseksi sain myös: network is unreacheble.
Sitten pingaan Kali Linuxista Metasploiteen, jotta ne saavat varmasti yhteyden toisiinsa. Yhteys löytyi koneiden välillä vasta Kalin uudelleenkäynnistämisen jälkeen.

g) Seuraavaksi etsin Metasploiten porttiskannaamalla komennnolla "nmap -sn" ja lisäksi metasploitablen ping-osoite. Tarkistin vielä selaimella, että ping oli oikea.

<img width="828" height="663" alt="image" src="https://github.com/user-attachments/assets/4f7a5fe7-dc39-4596-8cf1-23daaf87abfd" />

h) Seuraavana tehtävänä on skannata Metalspoitable huolellisesti ja kaikki portit. Löysin internetistä sivuston, josta löytyi kätevästi hyviä nmap-komentoja (Lähde alempana.) Komennolla "nmap -T4 -p1-1000 + maalikoneen ping" skannasin 1000 ensimmäistä porttia:

<img width="1131" height="684" alt="VirtualBox_leevihu_25_08_2025_00_26_03" src="https://github.com/user-attachments/assets/b62a82fd-7fdf-45fb-b61b-9284d49ab536" />

 
- Ainakin http-portti 80 on hyökkääjälle kiinnostava, koska siinä on muistaakseni huono tietoturva, jota hyökkääjä voi sitten hyväksikäyttää.
- Portti 513 login. Onko tämä sisäänkirjautumissivu? Jos on, niin se varmasti kiinnostaisi hyökkääjää.
- Portti 21 ftp-protokollassa lähetettiin ainakin salasanoja suojaamattomana.
 
 
 
 Lähteet:
- https://www.microsoft.com/fi-fi/security/business/security-101/what-is-cyber-kill-chain Täältä löytyi kahdeksas kybertappohyökkäyksen kohta
- https://www.kali.org/get-kali/#kali-installer-images Kalin lataussivusto
- https://nmap.org/book/man-briefoptions.html Nmapin omat sivut, löytyy paljon hyödyllistä tietoa siihen liittyen.
- https://tuomasvalkamo.com/PenTestCourse/week-2/ Virtuaaliverkon luonti koneiden välille.
- https://www.geeksforgeeks.org/linux-unix/top-30-basic-nmap-commands-for-beginners/#1-perform-a-basic-tcp-scan-on-the-specified-target Top 30 parhaat nmap-komennot.
- https://terokarvinen.com/tunkeutumistestaus/ Kurssin sivut.
