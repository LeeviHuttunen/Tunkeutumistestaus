# h6 Simpukoita

## a) Snif Venom! Näytä esimerkki yhteydestä: reverse shell msfvenom:lla tehdystä binääristä -> metasploit multi/handler. Tarkastele yhteysttä snifferillä, kuten Wireshark. Mitä havaitset? Mistä ominaisuuksista yhteyden voi tunnistaa? Millä muutoksilla tunnistamista voi vaikeuttaa?

- Aivan kuten edellisen viikon viimeisessä tehtävässä, loin haittaohjelman:

<img width="945" height="58" alt="image" src="https://github.com/user-attachments/assets/bcc123c2-aedb-44bf-b848-d081c594ac93" />

- Jonka jälkeen siirryin komennolla `msfconsole` Metasploitiin, asensin oikean payloadin, muutin käyttäjäoikeudet ja avasin infectedin kansion, aivan kuten edellisen viikon tehtävässä:

- <img width="877" height="591" alt="image" src="https://github.com/user-attachments/assets/510389ed-5dca-43db-b9f7-8178aae8c95c" />

- Ja näin Meterpreter on auki.

- Seuraavaksi koitin kokeilla komentoja `sysinfo` ja `sessions` ja tarkastella Wiresharkilla mitä tapahtuu.

- Ennen komentoja Wiresrhak näytti pelkkää TCP-protokollaa porteilla 80 ja 137:

<img width="692" height="295" alt="image" src="https://github.com/user-attachments/assets/f1fdffaa-ce6e-4d54-9923-8915262202a4" />

- Mutta komentoja lähetettyäni ainakin protokollat muuttuivat hetkellisesti, kunnes palasivat jälleen Tcp:hen:

<img width="1128" height="197" alt="image" src="https://github.com/user-attachments/assets/910a3405-dced-4769-8de4-33b06eaa9a4d" />

- Myös porttien numerot muuttuivat näissä pyynnöissä porteista 80 ja 137 portteihin, joita ei muuten ollut näkyvissä:

<img width="247" height="31" alt="image" src="https://github.com/user-attachments/assets/a0bb2dd3-828c-4ae2-8158-8a6ad23e220a" />

- Hyökkäyksen tunnistamista voisi vaikeuttaa varmaankin tietämällä protokollan mitä hyökättävän verkko käyttää ja koittaa käyttää samaa protokollaa, jotta tunkeutumista olisi vaikeampi havaita. ja totta kai myös näiden porttien käyttäminen, jos vain mahdollista. Ip:n salaaminen voisi myös auttaa, koska se pistäisi varmaan eniten silmään.


## b) Hello, Sliver. Näytä esimerkki http-yhteydestä Sliverillä.

- Latasin Sliverin Kali-virtuaalikoneelleni paketinhallinnalla komennolla `sudo apt-get install sliver`, jonka jälkeen avasin Sliverin komennolla `sliver-server`

- Sliveristä ei ole oikeastaan mitään käyttökokemusta tätä ennen, eikä ohjeitakaan oikein tunnilla, tai kurssin sivuilla ole. Nettisivulta `https://sliver.sh/` löytyi ohjeita Sliverin käyttöön. Osa ohjeista oli versioon 1.6, joka on poistettu käytöstä.

- Koitin ensin luoda Payloadin, mutta se ei onnistunut:

<img width="446" height="97" alt="image" src="https://github.com/user-attachments/assets/36fa4e49-c7fc-4a0e-aadc-7eda275c21a1" />

- Katsoin sitten Sliverin omilta sivuilta neuvoa, ensiksi loin implantin aivan Sliverin sivujen mallin mukaan:

<img width="609" height="119" alt="image" src="https://github.com/user-attachments/assets/8bab9cca-e860-45d0-ab5a-a6fa6c970923" />

Ja näin uusi implantti on luotu:

<img width="781" height="123" alt="image" src="https://github.com/user-attachments/assets/ec5c08e7-458a-4957-b5be-d023782834e6" />

Jonka jälkeen otin http-yhteyden:

<img width="292" height="102" alt="image" src="https://github.com/user-attachments/assets/20fc7ceb-4bbb-47d8-b443-76f7756b6906" />

## c) Sniff Sliver! Tarkastele Sliverin http-yhteyttä snifferillä. Mitä havaitset? Mistä ominaisuuksista yhteyden voi tunnistaa?

Ainakin ip-osoite oli tuntematon itselle näissä http-yhteyksissä, mitään muuta outoa en havainnut:

<img width="1259" height="165" alt="image" src="https://github.com/user-attachments/assets/8ba9640e-f5cd-4d9b-b5ba-d09f1a58e894" />

## d) Sliverillä voit muuttaa yhteyden ominaisuuksia. Kokeile ja näytä esimerkkejä. Muista todeta testein, että muutokset toimivat.

- Ilmeisesti en saanut luotua sessiota, vaikka yritin ohjeiden mukaan.

<img width="805" height="516" alt="image" src="https://github.com/user-attachments/assets/f7637249-f652-4a0b-9eed-65e828fae192" />

Yritin generoida implantin toisessa terminaali-ikkunassa, kuten ohjeistettiin, mutta ei toiminut:

<img width="334" height="175" alt="image" src="https://github.com/user-attachments/assets/cb597f13-0639-4c16-9f25-95fc0e8df2dc" />

Koitin pari tuntia troubleshootata, mutta turhaan. Noh harmi juttu, mutta ei voi mitään. Tosiaan tunnilla mainittiin ainakin, että ohjeissa on virheitä, koska ohjeet ovat uudesta versiosta ja nykyisin on vanha käytössä. Johtuisko vika siitä, todennäköisesti kuitenkin käyttäjässä on vikaa useimmiten.

- Katselin Sliverin sivuilta, että yhteyteen voi luoda Proxyn, session voi muuttaa shelliksi ja olemassa on Multiplayermode, jossa voi olla toisen kanssa samalla Sliver-serverillä

## e) Sliverillä voi tehdä monenlaista kohteessa, ruutukaappauksista alkaen. Näytä esimerkkejä toiminnoista.

- En voi tätäkään tehdä, koska en saa sessiota auki.. Komennolla `screenshot´ ottaa screenshotin. `sysinfo` näkee varmaan koneen speksit. Ja tosiaan Shellillä pystyy muuttamaan Beaconin tai session Shelliksi.


Jos joku kurssikaveri osaa laittaa palautteeseen, missä voisi olla vika niin saa yrittää auttaa :D Jäi ärsyttämään kun ei toiminut niin kuin piti. (EDIT: Juuri palautuksen jälkeen tajusin, etten ollut avannut ohjelmaa kalissa. Päivitän parhaillaan tehtävää)



## Lähteet

- https://terokarvinen.com/tunkeutumistestaus/
- https://sliver.sh/ Sliverin sivut
- https://github.com/BishopFox/sliver Luojan github, mistä myös löytyy infoa aiheeseen liittyen





